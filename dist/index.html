<div><div class="form-group has-tips manual" ld="base error-root" plug="widget"><div ld="display" data-display="block"><label class="d-flex align-items-end flex-wrap"><div><span ld="label"></span><span class="text-danger ml-2" ld="is-required">*</span></div><div class="flex-grow-1"></div><div class="m-edit"><div class="mf-note text-sm" ld="limitation"></div></div></label></div><div class="text-sm text-muted" ld="display" data-display="block"><div ld="desc" style="margin:-.6em 0 .7em"></div></div><div class="d-flex flex-column g-4 mb-2"><div ld-each="document"><div class="border rounded-sm shadow-sm" style="min-height:300px"><div ld="link"></div><object class="d-none w-100 h-100 flex-grow-1" style="vertical-align:top;min-height:300px" ld="link" data="about:blank" type="application/pdf"><embed class="w-100 border" ld="link" src="about:blank" type="application/pdf"></object><div class="w-100 p-2" ld="for-html"><iframe class="d-none w-100 flex-grow-1 border-0" title="consent-document" ld="link" src="about:blank"></iframe></div></div><div class="text-right" style="margin-top:.1em"><a class="text-sm" ld="link" target="_blank" rel="noopener noreferer"><span class="mr-1" ld="open"></span><i class="i-new-page text-sm"></i></a></div></div></div><div class="m-edit" ld="input"><div class="d-flex"><label class="mr-2 mb-2 clickable position-relative"><input class="mr-1" ld="checkbox" type="checkbox"><span class="no-select" ld="text"></span><div class="hover-tip tip-sm"><div ld-each="error"></div></div></label><div ld="display" data-display="inline"><span class="text-danger ml-2" ld="is-required">*</span></div></div></div><div class="m-view"><input class="mr-1" ld="checkbox-for-view" type="checkbox" disabled readonly><span ld="text"></span></div><div class="m-edit" ld="display" data-display="block"><div class="mf-note text-sm mt-2 note" ld-each="note"></div></div></div><script type="@plotdb/block">var mod;module.exports={pkg:{name:"@makeform/agreement",extend:{name:"@makeform/common"},dependencies:[],i18n:{en:{"未勾選":"not checked",open:"Open this document in new window"},"zh-TW":{"未勾選":"未勾選",open:"在新視窗開啟此文件"}}},init:function(e){return e.pubsub.fire("subinit",{mod:mod(e)})}};mod=function(e){var o,t,n,r,i,u,c,d,a,s,l,f;o=e.root,t=e.manager,n=e.ctx,r=e.data,i=e.parent,u=e.t,c=e.i18n;d=n.ldview;a={value:null};s="_"+Math.random().toString(36).substring(2);l=null;f=function(){var n;n={lib:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.min.js",worker:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.worker.min.js"};return t.rescope.load([{url:n.lib}]).then(function(e){l=e.pdfjsLib;l.GlobalWorkerOptions.workerSrc=n.worker;return l})};return{init:function(e){var r,n,t=this;this.on("change",function(e){a.value=!!e;return t.mod.child.view.render(["input","checkbox","content"])});r=function(e){return t.value(a.value=!!e)};this.on("meta",function(e){});return this.mod.child.view=n=new d({root:o,action:{change:{checkbox:function(e){var n,t;n=e.node,t=e.ctx;return r(n.checked?true:false)}}},text:{content:function(e){var n;n=e.node;if(t.isEmpty()){return u("未勾選")}else{return t.mod.info.config.value||""}},text:function(e){var n;n=e.node;return u(t.mod.info.config.value||"")}},handler:{document:{list:function(){return t.mod.info.config.documents||[]},key:function(e){return e},view:{init:{link:function(e){var o,n,t,r,i;o=e.node,n=e.ctx;t=n;r=/\.html/.exec(t);i=/\.pdf/.exec(t);return o.addEventListener("load",function(){if(i&&o.nodeName.toLowerCase()==="object"){return f().then(function(){return l.getDocument(n).promise}).then(function(r){return r.getPage(1).then(function(e){var n,t;n=e.getViewport({scale:1});t=o.getBoundingClientRect();n=e.getViewport({scale:1*(t.width/n.width)});return r.numPages>3?window.innerHeight*.66:r.numPages*(t.width/n.width)*n.height+56})}).then(function(e){return o.style.minHeight=e+"px"})}else if(r){return debounce(1e3).then(function(){var e;o.setAttribute("scrolling","no");e=o.contentDocument.body.parentNode.scrollHeight;return o.style.height=e+"px"})}})}},handler:{"for-html":function(e){var n,t,r;n=e.node,t=e.ctx;r=t;return n.classList.toggle("d-none",!/\.html/.exec(r))},open:function(e){var n,t;n=e.node,t=e.ctx;return n.textContent=u("open")},link:function(e){var n,t,r,o,i;n=e.node,t=e.ctx;r=t;o=n.nodeName.toLowerCase();if(r===n.dataset.link){return}n.dataset.link=r;i=/\.html/.exec(r);if(o==="object"||o==="embed"){n.classList.toggle("d-none",i)}if(o==="iframe"){n.classList.toggle("d-none",!i)}if(o==="a"){return n.setAttribute("href",r)}else if(o==="object"){return n.setAttribute("data",r)}else{return n.setAttribute("src",r)}}}}},input:function(e){var n;n=e.node;return n.classList.toggle("text-danger",t.status()===2)},checkbox:function(e){var n;n=e.node;if(!t.mod.info.meta.readonly){n.removeAttribute("disabled")}else{n.setAttribute("disabled",null)}return n.checked=!!a.value},"checkbox-for-view":function(e){var n;n=e.node;return n.checked=!!a.value}}})},render:function(){return this.mod.child.view.render()},isEmpty:function(e){return!e},content:function(e){return!!e}}};</script></div>
